# vector-stores.sentralix.ru
 
 Сервис управления RAG базами знаний (файлы, индексы, индексация) по единому API-контракту.
 
 Провайдеры индексов/движков (план):
 - `yandex`
 - `openai`
 - `sentralix` (локальный движок проекта)
 
 ---
 
 ## Возможности (план реализации)
 
 - **Файлы домена**: загрузка/скачивание/обновление метаданных/удаление.
 - **Индексы**: CRUD операций с индексами.
 - **Связь файл ↔ индекс**.
 - **Интеграции провайдеров**: единый контракт и фасады.
 - **Отложенная индексация**: создание индекса у провайдера, загрузка/прикрепление файлов, запуск индексации, контроль статусов.
 
 ---
 
 ## Быстрый старт (Docker)
 
 ### Требования
 - `docker`
 - `docker compose`
 
 В `docker-compose.yaml` используется внешняя сеть `docker_net`. Она должна существовать на хосте.
 
 Также обратите внимание: в текущем `docker-compose.yaml` заданы volumes с путями хоста (например `/srv2/...`).
 Для локальной разработки эти пути нужно заменить на актуальные для вашего окружения.
 
 ### Переменные окружения
 Файл `.env` (на хосте) должен содержать как минимум:
 - `DATABASE_URI`
 
 Для провайдеров (по мере подключения):
 - `YC_FOLDER_ID`
 - `YC_SA_KEY_JSON_B64`
 - `OPENAI_API_KEY`
 
 Также используются настройки логирования (см. `docker-compose.yaml`):
 - `LOG_LEVEL`
 - `LOG_FORMAT`
 - `LOG_FILE`
 - `LOG_TO_CONSOLE`
 
 ### Запуск
 ```bash
 docker compose up -d --build
 ```
 
 ### Остановка
 ```bash
 docker compose down
 ```
 
 ---
 
 ## API
 
 - **Swagger UI**: `/docs`
 - **Базовая проверка доступности**: `GET /health`
 - **Базовый префикс API** (по договорённости): `/api/v1`
 
 ### Доменная изоляция
 Все операции выполняются строго в рамках `domain_id`.
 
 Рекомендуемый способ передачи домена: заголовок `X-Domain-Id`.
 
 ---
 
 ## Хранение файлов
 
 - Внутри контейнера файлы хранятся в `/files`.
 - Для каждого домена используется отдельная подпапка: `/files/<domain_id>/...`.
 
 ---
 
 ## Архитектура (слои)
 
 - **Точка входа**: `main.py`.
 - **API слой**: `app/api` — принимает запросы и вызывает сервисы.
 - **Pydantic схемы**: `app/schemas`.
 - **Модели БД (SQLAlchemy)**: `app/models`.
 - **Сервисный слой**: `app/services` — CRUD и оркестрация.
 - **Интеграции провайдеров**: `app/providers` — отдельные папки + единый фасад/контракт.
 - **Утилиты**: `app/utils` — единый логгер и вспомогательные компоненты.
 
 ---
 
 ## Документация

- **Техническое задание (ТЗ)**: [`docs/technical_specification.md`](./docs/technical_specification.md)
- **План разработки по шагам**: [`docs/steps/00_steps_overview.md`](./docs/steps/00_steps_overview.md)
- **Решения и изменения**: [`docs/solutions_and_changes.md`](./docs/solutions_and_changes.md)

---

## Миграции
 
 Миграции хранятся в `docs/migrations/` (по требованию проекта).
