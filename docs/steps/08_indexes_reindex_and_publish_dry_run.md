### Шаг 8: Переиндексация/обновление индекса и dry-run публикации
- Цель:
  - Дать фронтенду понятную операцию “обновить индекс” без ручного анализа attach/detach.
  - Добавить режим предварительного просмотра (dry-run) для публикации: показать, что будет прикреплено/откреплено.
- Действия:
  - Расширить публикацию индекса:
    - `POST /api/v1/indexes/{index_id}/publish`
    - Добавить query-параметр:
      - `dry_run: bool = false`
    - Поведение при `dry_run=true`:
      - Не выполнять операции в провайдере.
      - Вернуть расчёт:
        - `desired_provider_file_ids`
        - `existing_provider_file_ids`
        - `missing_provider_file_ids` (будут прикреплены)
        - `extra_provider_file_ids` (будут откреплены при `detach_extra=true`)
    - Поведение при `dry_run=false`:
      - Выполнить attach/detach в провайдере.
      - Не ждать завершения индексации файлов в провайдере.
      - Статус индексирования проверяется отдельными ручками (polling/sync).
  - Добавить явную ручку “переиндексации” (если нужна как отдельное действие в UI):
    - `POST /api/v1/indexes/{index_id}/reindex`
    - Вход:
      - `X-Domain-Id: str`
      - (опционально) `force_upload: bool`
    - Поведение:
      - Переиспользовать логику публикации (обеспечить, что состав файлов у провайдера соответствует локальному).
      - Не ждать завершения индексации.
      - Если провайдер требует явного “перезапуска” индексации, реализовать это через пересоздание пустого индекса у провайдера (удалить внешний индекс и создать новый) с последующим асинхронным прикреплением файлов.
- Ожидаемый результат:
  - Фронтенд может безопасно показать пользователю “что изменится” перед публикацией и запускать обновление индекса отдельной кнопкой.
- Критерии готовности (Definition of Done):
  - В `publish` добавлен `dry_run` и возвращается корректный план операций.
  - (Если реализована) ручка `POST /api/v1/indexes/{index_id}/reindex` запускает обновление индекса без ожидания индексации.
  - Поведение идемпотентно: повторный вызов не ломает состояние.
  - Swagger документирован.
- Выполнено: нет
