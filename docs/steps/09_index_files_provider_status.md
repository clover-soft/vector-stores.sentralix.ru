### Шаг 9: Статусы файлов внутри индекса (агрегация локально + провайдер)
- Цель:
  - Дать фронтенду каноничный способ увидеть прогресс/статус индексирования по файлам внутри конкретной базы знаний.
  - Избавить фронтенд от необходимости дергать админ-ручки провайдера напрямую.
- Действия:
  - Добавить агрегирующую ручку по индексу:
    - `GET /api/v1/indexes/{index_id}/provider-files`
    - Вход:
      - `index_id: str`
      - `X-Domain-Id: str`
    - Выход (предложение):
      - `items: list[object]`, где на каждый локальный файл возвращается:
        - `file: FileOut`
        - `provider_upload` (status/last_error/external_file_id)
        - `provider_vector_store_file` (payload из `vector_stores.files.retrieve/list`, если доступно)
      - `errors: list[str]`
    - Поведение:
      - Получить локальные файлы индекса (`rag_index_files`).
      - Для каждого локального файла подтянуть `rag_provider_file_uploads` для `provider_type` индекса.
      - Если у индекса есть `external_id` — получить список файлов у провайдера (`list_vector_store_files`) и сматчить с upload-ами.
      - Важно (для отложенной индексации):
        - `provider_upload.status` отражает загрузку файла в провайдера (Files API), но не факт завершённой индексации.
        - `provider_vector_store_file.status` (из Vector Stores Files API) отражает прогресс индексирования файла в рамках индекса.
        - Ручка не должна ждать завершения индексации: она возвращает “срез” текущих статусов (polling).
      - Семантика идентификаторов:
        - для `provider_type="yandex"` `rag_provider_file_uploads.external_file_id` трактуется как `vector_store.file.id` (и в Яндексе совпадает с `file_id`).
  - Альтернатива (если не хочется новая ручка): расширить ответ `GET /api/v1/indexes/{index_id}/files`, добавив туда поля `provider_*`.
- Ожидаемый результат:
  - UI “База знаний → файлы” отображает реальные статусы (загружен/в обработке/ошибка) без знаний о провайдерных API.
- Критерии готовности (Definition of Done):
  - Реализована ручка агрегации статусов файлов (новая или расширение существующей).
  - Доменная изоляция соблюдена.
  - При отсутствии `external_id` возвращается корректный ответ (без падений) с диагностикой.
  - Swagger документирован.
- Выполнено: да
